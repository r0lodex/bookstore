<div class="instruction text-center">
    <small class="text-muted">
        Klik <span><span class="lnr lnr-plus-circle"></span></span> untuk memilih <i>item</i> yang berkenaan.<br>
        Klik pada nama pakej untuk melihat kandungan pakej tersebut.<br>
        Klik pada <a href="#/bayar">Bayar</a> untuk menyemak pembelian dan membuat pembayaran.
    </small>
</div>

<div class="shop-container">
    <ul class="list-group package">
        <li class="list-group-item" ng-repeat="package in books.packages">
            <span class="list-group-item-heading">
                <a ng-click="collapse[$index] = !collapse[$index]"><strong ng-bind="package.title"></strong></a>
            </span>
            <ul class="package-control list-inline small">
                <li ng-bind="updatePackageDetail(package.items).count + ' item'"></li>
                <li><strong>RM<span ng-bind="updatePackageDetail(package.items).price | number: 2"></span></strong></li>
                <li><a ng-click="addToCart(package.items)"><span class="lnr lnr-plus-circle"></span></a></li>
            </ul>
            <div uib-collapse="collapse[$index]" class="package-content animate">
                <small class="text-muted">Buang tanda <input type="checkbox" checked disabled> pada <i>item</i> yang tidak berkenaan. Kuantiti boleh diubah pada <a href="#/bayar">Bayar</a>.</small>
                <table class="table table-striped table-sm small">
                    <thead>
                        <tr>
                            <th>Tajuk Buku</th>
                            <th>Penerbit</th>
                            <th>Tahun</th>
                            <th class="text-center">Qty</th>
                            <th class="text-right">Harga <span class="hidden-sm-down">RM</span></th>
                            <th class="text-right">Jumlah <span class="hidden-sm-down">RM</span></th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr ng-repeat="book in package.items" ng-init="book.checked = true;">
                            <td>
                                <input type="checkbox" checked ng-model="book.checked">
                                <span class="package-list-title" ng-bind="book.title"></span>
                            </td>
                            <td ng-bind="book.publisher"></td>
                            <td ng-bind="book.published_year">2013</td>
                            <td class="text-center" ng-bind="book.qty">
                                <!-- <select ng-model="book.qty" ng-options="v for v in [1,2,3,4,5]" ng-change="updatePackageTotal(package.books)"></select> -->
                            </td>
                            <td class="text-right" ng-bind="book.price | number:2"></td>
                            <td class="text-right" ng-bind="book.price * book.qty | number: 2"></td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </li>
    </ul>

    <section class="item-list">
        <div ng-repeat="b in books.books">
            <h6>
                <small><a ng-click="sen[$index] = !sen[$index]"><span class="lnr" ng-class="{ 'lnr-chevron-down-circle':sen[$index], 'lnr-chevron-up-circle':!sen[$index] }"></span></a></small>
                Senarai <span ng-bind="b.category"></span>
            </h6>
            <div uib-collapse="sen[$index]" class="animate">
                <table class="table table-striped table-sm small">
                    <thead>
                        <tr>
                            <th>Tajuk Buku</th>
                            <th>Penerbit</th>
                            <th>Tahun</th>
                            <th class="text-center">Qty</th>
                            <th class="text-right">Harga <span class="hidden-sm-down">RM</span></th>
                            <th class="text-right">Jumlah <span class="hidden-sm-down">RM</span></th>
                            <th>&nbsp;</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr ng-repeat="book in b.items" ng-init="book.qty = 1">
                            <td ng-bind="book.title"></td>
                            <td ng-bind="book.publisher"></td>
                            <td ng-bind="book.published_year">2013</td>
                            <td class="text-center">
                                <select ng-model="book.qty" ng-options="v for v in [1,2,3,4,5]" ng-change="updatePackageTotal(package.books)"></select>
                            </td>
                            <td class="text-right" ng-bind="book.price | number:2"></td>
                            <td class="text-right" ng-bind="book.price * book.qty | number: 2"></td>
                            <td class="text-center"><a ng-click="addToCart(package.items)"><span class="lnr lnr-plus-circle"></span></a></td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </div>
    </section>
</div>